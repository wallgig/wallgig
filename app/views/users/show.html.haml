- title @user.username

.row
  .col-lg-9
    - if @collections.any?
      %h3
        %span.glyphicon.glyphicon-folder-close
        = link_to 'Collections', user_collections_path(@user)
        %small= @user.collections.accessible_by(current_ability, :read).count

      = render partial: 'collections/list', locals: { collections: @collections, should_apply_purity_settings: !myself?, extra_css_class: 'row-1' }

    - if @user.wallpapers.any?
      %h3
        %span.glyphicon.glyphicon-cloud-upload
        = link_to 'Uploads', user_wallpapers_path(@user)
        %small= @user.wallpapers.accessible_by(current_ability, :read).count

      = render partial: 'wallpapers/list', locals: { wallpapers: @wallpapers, extra_css_class: 'row-1' }

    - if @favourite_wallpapers.any?
      %h3
        %span.glyphicon.glyphicon-star
        = link_to 'Favourites', user_favourites_path(@user)
        %small= @user.favourite_wallpapers.count

      = render partial: 'wallpapers/list', locals: { wallpapers: @favourite_wallpapers, extra_css_class: 'row-2' }

  .col-lg-3
    %h3
      %span.glyphicon.glyphicon-comment
      Comments
      %small= @user.comments_count
    - if user_signed_in?
      = simple_form_for :comment, url: user_comments_path(@user), remote: true, data: { provide: 'comments' } do |f|
        = f.input :comment, as: :text, label: false
        = f.submit 'Post', class: 'btn btn-block', data: { disable_with: 'Posting' }
      %hr/
    - comments = @user.comments.includes(:user).latest
    %div.container-comments{:class => ('hide' if comments.empty?)}
      %ul.list-unstyled.list-comment= render comments.limit(4)
      - if comments.size > 4
        = link_to 'Load all comments', user_comments_path(@user), class: 'btn btn-block', remote: true, data: { action: 'load-comments' }